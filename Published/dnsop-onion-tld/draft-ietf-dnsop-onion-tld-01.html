<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head profile="http://dublincore.org/documents/2008/08/04/dc-html/"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The .onion Special-Use Domain Name</title><link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><style type="text/css">
    body {
      padding-top: 80px;
      padding-bottom: 80px;
      position: relative;
    }
    .table.header th, .table.header td { 
      border-top: none; 
      padding: 0;
    }
    .nav-sublist {
      padding-left: 20px;
      padding-right: 10px;
      font-size: 90%;
    }
    .container .nav > li > a {
      padding-top: 10px;
      display: inline-block;
    }
  </style><link rel="Contents" href="#rfc.toc"><link rel="Author" href="#rfc.authors"><link rel="Copyright" href="#rfc.copyrightnotice"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 The “.onion” Special-Use Domain Name" href="#rfc.section.2"><link rel="Chapter" title="3 IANA Considerations" href="#rfc.section.3"><link rel="Chapter" title="4 Security Considerations" href="#rfc.section.4"><link rel="Chapter" href="#rfc.section.5" title="5 References"><link rel="Appendix" title="A Acknowledgements" href="#rfc.section.A"><meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.662, 2014/07/19 09:19:17, XSLT vendor: SAXON 9.1.0.8 from Saxonica http://www.saxonica.com/"><meta name="keywords" content="Internet-Draft, onion, tld, dns"><link rel="schema.dct" href="http://purl.org/dc/terms/"><meta name="dct.creator" content="Appelbaum, J."><meta name="dct.creator" content="Muffett, A."><meta name="dct.identifier" content="urn:ietf:id:draft-ietf-dnsop-onion-tld-01"><meta name="dct.issued" scheme="ISO8601" content="2015-09-09"><meta name="dct.abstract" content="This document registers the “.onion” Special-Use Domain Name."><meta name="description" content="This document registers the “.onion” Special-Use Domain Name."></head><body data-spy="scroll" data-target="#rfc.toc"><div class="container" id="top"><div class="row"><div class="col-md-4 col-md-push-8 affix hidden-sm hidden-xs" role="navigation"><div class="navbar"><div class="navbar-brand"><a href="#top">Internet-Draft</a></div><br clear="all"><div class=""><div id="rfc.toc"><ul class="nav"><li><a href="#rfc.section.1">1.</a> <a href="#intro" data-toggle="collapse" data-target="#toc.intro">Introduction</a><div class="collapse" id="toc.intro"><ul class="nav-sublist list-unstyled"><li><a href="#rfc.section.1.1">1.1</a> <a href="#notational-conventions">Notational Conventions</a></li></ul></div></li><li><a href="#rfc.section.2">2.</a> <a href="#onion">The “.onion” Special-Use Domain Name</a></li><li><a href="#rfc.section.3">3.</a> <a href="#iana-considerations">IANA Considerations</a></li><li><a href="#rfc.section.4">4.</a> <a href="#security">Security Considerations</a></li><li><a href="#rfc.section.5">5.</a> <a href="#rfc.references" data-toggle="collapse" data-target="#toc.references">References</a><ul class="nav-sublist list-unstyled collapse" id="toc.references"><li><a href="#rfc.section.5.1">5.1</a> <a href="#rfc.references.1">Normative References</a></li><li><a href="#rfc.section.5.2">5.2</a> <a href="#rfc.references.2">Informative References</a></li></ul></li><li><a href="#rfc.section.A">A.</a> <a href="#acknowledgements">Acknowledgements</a></li><li><a href="#rfc.authors">Authors' Addresses</a></li></ul></div></div></div></div><div class="col-md-8 main" role="main"><table class="table table-condensed header" id="rfc.headerblock"><tbody><tr><td class="text-left">dnsop Working Group</td><td class="text-right">J. Appelbaum</td></tr><tr><td class="text-left">Internet-Draft</td><td class="text-right">The Tor Project, Inc</td></tr><tr><td class="text-left"><strong>Intended status: </strong>Standards Track</td><td class="text-right">A. Muffett</td></tr><tr><td class="text-left"><strong>Expires: </strong>March 12, 2016</td><td class="text-right">Facebook</td></tr><tr><td class="text-left"></td><td class="text-right">September 9, 2015</td></tr></tbody></table><div class="page-header"><h1 class="title" id="rfc.title">The .onion Special-Use Domain Name<br><small>draft-ietf-dnsop-onion-tld-01</small></h1></div><h1 id="rfc.abstract">Abstract</h1><div class="lead"><p>This document registers the “.onion” Special-Use Domain Name.</p></div><div id="rfc.status"><h1>Status of this Memo</h1><p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p><p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute working documents as Internet-Drafts. The list of current Internet-Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.</p><p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as “work in progress”.</p><p>This Internet-Draft will expire on March 12, 2016.</p></div><div id="rfc.copyrightnotice"><h1>Copyright Notice</h1><p>Copyright © 2015 IETF Trust and the persons identified as the document authors. All rights reserved.</p><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p></div><div id="intro"><h1 id="rfc.section.1" class="np">1.&nbsp;Introduction</h1><p id="rfc.section.1.p.1">The Tor network <a href="#Dingledine2004"><cite title="Tor: the second-generation onion router">[Dingledine2004]</cite></a> has the ability to host network services using the “.onion” Special-Use Top-Level Domain. Such names can be used as other domain names would be (e.g., in URLs <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>), but instead of using the DNS infrastructure, .onion names functionally correspond to the identity of a given service, thereby combining location and authentication.</p><p id="rfc.section.1.p.2">.onion names are used to provide access to end to end encrypted, secure, anonymized services; that is, the identity and location of the server is obscured from the client. The location of the client is obscured from the server. The identity of the client may or may not be disclosed through an optional cryptographic authentication process.</p><p id="rfc.section.1.p.3">.onion names are self-authenticating, in that they are derived from the cryptographic keys used by the server in a client-verifiable manner during connection establishment. As a result, the cryptographic label component of a .onion name is not intended to be human-meaningful.</p><p id="rfc.section.1.p.4">The Tor network is designed to not be subject to any central controlling authorities with regards to routing and service publication, so .onion names cannot be registered, assigned, transferred or revoked. “Ownership” of a .onion name is derived solely from control of a public/private key pair which corresponds to the algorithmic derivation of the name.</p><p id="rfc.section.1.p.5">In this way, .onion names are “special” in the sense defined by <a href="#RFC6761"><cite title="Special-Use Domain Names">[RFC6761]</cite></a> Section 3; they require hardware and software implementations to change their handling in order to achieve the desired properties of the name (see <a href="#security" title="Security Considerations">Section&nbsp;4</a>). These differences are listed in <a href="#onion" title="The “.onion” Special-Use Domain Name">Section&nbsp;2</a>.</p><p id="rfc.section.1.p.6">Like Top-Level Domain Names, .onion names can have an arbitrary number of subdomain components. This information is not meaningful to the Tor protocol, but can be used in application protocols like HTTP <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>.</p><p id="rfc.section.1.p.7">Note that .onion names are required conform to DNS name syntax (as defined in Section 3.5 of <a href="#RFC1034"><cite title="Domain names - concepts and facilities">[RFC1034]</cite></a> and Section 2.1 of <a href="#RFC1123"><cite title="Requirements for Internet Hosts - Application and Support">[RFC1123]</cite></a>), as they will still be exposed to DNS implementations.</p><p id="rfc.section.1.p.8">See <a href="#tor-address"><cite title="Special Hostnames in Tor">[tor-address]</cite></a> and <a href="#tor-rendezvous"><cite title="Tor Rendezvous Specification">[tor-rendezvous]</cite></a> for the details of the creation and use of .onion names.</p><div id="notational-conventions"><h2 id="rfc.section.1.1">1.1&nbsp;Notational Conventions</h2><p id="rfc.section.1.1.p.1">The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <a href="#RFC2119"><cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>.</p></div></div><div id="onion"><h1 id="rfc.section.2">2.&nbsp;The “.onion” Special-Use Domain Name</h1><p id="rfc.section.2.p.1">These properties have the following effects upon parties using or processing .onion names (as per <a href="#RFC6761"><cite title="Special-Use Domain Names">[RFC6761]</cite></a>):</p><ol><li>Users: Human users are expected to recognize .onion names as having different security properties (see <a href="#intro" title="Introduction">Section&nbsp;1</a>), and also as being only available through software that is aware of onion names.</li><li>Application Software: Applications (including proxies) that implement the Tor protocol MUST recognize .onion names as special by either accessing them directly, or using a proxy (e.g., SOCKS <a href="#RFC1928"><cite title="SOCKS Protocol Version 5">[RFC1928]</cite></a>) to do so. Applications that do not implement the Tor protocol SHOULD generate an error upon the use of .onion, and SHOULD NOT perform a DNS lookup.</li><li>Name Resolution APIs and Libraries: Resolvers MUST either respond to requests for .onion names by resolving them according to <a href="#tor-rendezvous"><cite title="Tor Rendezvous Specification">[tor-rendezvous]</cite></a> or by responding with NXDOMAIN.</li><li>Caching DNS Servers: Caching servers, where not explicitly adapted to interoperate with Tor, SHOULD NOT attempt to look up records for .onion names. They MUST generate NXDOMAIN for all such queries.</li><li>Authoritative DNS Servers: Authoritative servers MUST respond to queries for .onion with NXDOMAIN.</li><li>DNS Server Operators: Operators MUST NOT configure an authoritative DNS server to answer queries for .onion. If they do so, client software is likely to ignore any results (see above).</li><li>DNS Registries/Registrars: Registrars MUST NOT register .onion names; all such requests MUST be denied.</li></ol><p id="rfc.section.2.p.3">Note that the restriction upon the registration of .onion names does not prohibit IANA from inserting a record into the root zone database to reserve the name.</p><p id="rfc.section.2.p.4">Likewise, it does not prevent non-DNS service providers (such as trust providers) from supporting .onion names in their applications.</p></div><div id="iana-considerations"><h1 id="rfc.section.3">3.&nbsp;IANA Considerations</h1><p id="rfc.section.3.p.1">This document registers “onion” in the registry of Special-Use Domain Names <a href="#RFC6761"><cite title="Special-Use Domain Names">[RFC6761]</cite></a>. See <a href="#onion" title="The “.onion” Special-Use Domain Name">Section&nbsp;2</a> for the registration template.</p></div><div id="security"><h1 id="rfc.section.4">4.&nbsp;Security Considerations</h1><p id="rfc.section.4.p.1">The security properties of .onion names can be compromised if, for example:</p><ul><li>The server “leaks” its identity in another way (e.g., in an application-level message), or</li><li>The access protocol is implemented or deployed incorrectly, or</li><li>The access protocol itself is found to have a flaw.</li></ul><p id="rfc.section.4.p.3">Users must take special precautions to ensure that the .onion name they are communicating with is the intended one, as attackers may be able to find keys which produce service names that are visually or semantically similar to the desired service. This risk is magnified because .onion names are typically not human-meaningful. It can be mitigated by generating human meaningful .onion names (at considerable computing expense), or through users using bookmarks and other trusted stores when following links.</p><p id="rfc.section.4.p.4">Also, users need to understand the difference between a .onion name used and accessed directly via Tor-capable software, versus .onion subdomains of other top-level domain names and providers (e.g., the difference between example.onion and example.onion.tld).</p><p id="rfc.section.4.p.5">The cryptographic label for a .onion name is constructed by applying a function to the public key of the server, the output of which is rendered as a string and concatenated with the string “.onion”. Dependent upon the specifics of the function used, an attacker may be able to find a key that produces a collision with the same .onion name with substantially less work than a cryptographic attack on the full strength key. If this is possible the attacker may be able to impersonate the service on the network.</p><p id="rfc.section.4.p.6">A legacy client may inadvertently attempt to resolve a “.onion” name through the DNS. This causes a disclosure that the client is attempting to use Tor to reach a specific service. Malicious resolvers could be engineered to capture and record such leaks, which might have very adverse consequences for the well-being of the Tor user. This issue is mitigated if the client’s Tor software is updated to not leak such queries, or if the client’s DNS software is updated to drop any request to the “.onion” TLD.</p></div><h1 id="rfc.references"><a id="rfc.section.5">5.</a> References</h1><h2 id="rfc.references.1"><a href="#rfc.section.5.1" id="rfc.section.5.1">5.1</a> Normative References</h2><dl class="dl-horizontal"><dt><span id="Dingledine2004">[Dingledine2004]</span></dt><dd>Dingledine, R., Mathewson, N., and P. Syverson, “<a href="https://spec.torproject.org/tor-spec">Tor: the second-generation onion router</a>”, 2004, &lt;<a href="https://spec.torproject.org/tor-spec">https://spec.torproject.org/tor-spec</a>&gt;.</dd><dt><span id="RFC2119">[RFC2119]</span></dt><dd>Bradner, S., “<a href="http://www.rfc-editor.org/info/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>”, BCP&nbsp;14, RFC&nbsp;2119, DOI&nbsp;10.17487/RFC2119, March&nbsp;1997, &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.</dd><dt><span id="RFC6761">[RFC6761]</span></dt><dd>Cheshire, S. and M. Krochmal, “<a href="http://www.rfc-editor.org/info/rfc6761">Special-Use Domain Names</a>”, RFC&nbsp;6761, DOI&nbsp;10.17487/RFC6761, February&nbsp;2013, &lt;<a href="http://www.rfc-editor.org/info/rfc6761">http://www.rfc-editor.org/info/rfc6761</a>&gt;.</dd><dt><span id="tor-address">[tor-address]</span></dt><dd>Mathewson, N. and R. Dingledine, “<a href="https://spec.torproject.org/address-spec">Special Hostnames in Tor</a>”, September&nbsp;2001, &lt;<a href="https://spec.torproject.org/address-spec">https://spec.torproject.org/address-spec</a>&gt;.</dd><dt><span id="tor-rendezvous">[tor-rendezvous]</span></dt><dd>Mathewson, N. and R. Dingledine, “<a href="https://spec.torproject.org/rend-spec">Tor Rendezvous Specification</a>”, April&nbsp;2014, &lt;<a href="https://spec.torproject.org/rend-spec">https://spec.torproject.org/rend-spec</a>&gt;.</dd></dl><h2 id="rfc.references.2"><a href="#rfc.section.5.2" id="rfc.section.5.2">5.2</a> Informative References</h2><dl class="dl-horizontal"><dt><span id="RFC1034">[RFC1034]</span></dt><dd>Mockapetris, P., “<a href="http://www.rfc-editor.org/info/rfc1034">Domain names - concepts and facilities</a>”, STD&nbsp;13, RFC&nbsp;1034, DOI&nbsp;10.17487/RFC1034, November&nbsp;1987, &lt;<a href="http://www.rfc-editor.org/info/rfc1034">http://www.rfc-editor.org/info/rfc1034</a>&gt;.</dd><dt><span id="RFC1123">[RFC1123]</span></dt><dd>Braden, R., Ed., “<a href="http://www.rfc-editor.org/info/rfc1123">Requirements for Internet Hosts - Application and Support</a>”, STD&nbsp;3, RFC&nbsp;1123, DOI&nbsp;10.17487/RFC1123, October&nbsp;1989, &lt;<a href="http://www.rfc-editor.org/info/rfc1123">http://www.rfc-editor.org/info/rfc1123</a>&gt;.</dd><dt><span id="RFC1928">[RFC1928]</span></dt><dd>Leech, M., Ganis, M., Lee, Y., Kuris, R., Koblas, D., and L. Jones, “<a href="http://www.rfc-editor.org/info/rfc1928">SOCKS Protocol Version 5</a>”, RFC&nbsp;1928, DOI&nbsp;10.17487/RFC1928, March&nbsp;1996, &lt;<a href="http://www.rfc-editor.org/info/rfc1928">http://www.rfc-editor.org/info/rfc1928</a>&gt;.</dd><dt><span id="RFC3986">[RFC3986]</span></dt><dd>Berners-Lee, T., Fielding, R., and L. Masinter, “<a href="http://www.rfc-editor.org/info/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>”, STD&nbsp;66, RFC&nbsp;3986, DOI&nbsp;10.17487/RFC3986, January&nbsp;2005, &lt;<a href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>&gt;.</dd><dt><span id="RFC7230">[RFC7230]</span></dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “<a href="http://www.rfc-editor.org/info/rfc7230">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>”, RFC&nbsp;7230, DOI&nbsp;10.17487/RFC7230, June&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.</dd></dl><div id="acknowledgements"><h1 id="rfc.section.A" class="np">A.&nbsp;Acknowledgements</h1><p id="rfc.section.A.p.1">Thanks to Roger Dingledine, Linus Nordberg, and Seth David Schoen for their input and review.</p><p id="rfc.section.A.p.2">This specification builds upon previous work by Christian Grothoff, Matthias Wachs, Hellekin O. Wolf, Jacob Appelbaum, and Leif Ryge to register .onion in conjunction with other, similar Special-Use Top-Level Domain Names.</p></div><div class="avoidbreak"><h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1><p><b>Jacob Appelbaum</b><br>The Tor Project, Inc<br>EMail: <a href="mailto:jacob@appelbaum.net">jacob@appelbaum.net</a></p><p><b>Alec Muffett</b><br>Facebook<br>EMail: <a href="mailto:alecm@fb.com">alecm@fb.com</a></p></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script type="text/javascript">
        /* This is a workaround for https://github.com/twbs/bootstrap/issues/14285 */
        $('.nav a').on('click', function(a) {$(a.target.dataset.target.replace( /(:|\.|\[|\])/g, "\\$1" )).collapse('toggle')})
      </script></body></html>