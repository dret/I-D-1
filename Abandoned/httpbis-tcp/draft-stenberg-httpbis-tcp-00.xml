<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.0.28 -->

<!DOCTYPE rfc SYSTEM "../Tools/rfc2629xslt/rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>

<rfc ipr="trust200902" docName="draft-stenberg-httpbis-tcp-00" category="bcp">

  <front>
    <title abbrev="TCP for HTTP">TCP Performance Tuning for HTTP</title>

    <author initials="D." surname="Stenberg" fullname="Daniel Stenberg">
      <organization></organization>
      <address>
        <email>daniel@haxx.se</email>
        <uri>http://daniel.haxx.se</uri>
      </address>
    </author>

    <date year="2015"/>

    <area>General</area>
    
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>This document records current best practice for using all versions of HTTP over TCP.</t>



    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>HTTP <xref target="RFC7230"/> is currently defined to use TCP <xref target="RFC0793"/>, and its performance can depend greatly upon
how TCP is configured. This document records best current practice for using HTTP over TCP, with a
focus on improving end-user perceived performance.</t>

<t>These practices are generally applicable to HTTP/1 as well as HTTP/2, although some may note
particular impact or nuance regarding a particular protocol version.</t>

<section anchor="notational-conventions" title="Notational Conventions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
“RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in
<xref target="RFC2119"/>.</t>

</section>
</section>
<section anchor="tcp-fast-open" title="TCP Fast Open">

<t>TCP Fast Open (a.k.a. TFO, <xref target="RFC7430"/>) allows data to be sent on the TCP handshake, thereby
allowing a request to be sent without any delay if a connection is not open.</t>

<t>TFO requires both client and server support, and additionally requires application knowledge,
because the data sent on the SYN cannot be idempotent. Therefore, TFO can only be used on
non-idempotent, safe methods (e.g., GET and HEAD), or with intervening negotiation (e.g, using TLS).</t>

<t>Support for TFO is growing in client platforms, especially mobile, due to the significant
performance advantage it gives.</t>

</section>
<section anchor="initial-congestion-window" title="Initial Congestion Window">

<t><xref target="RFC6928"/> specifies an initial congestion window of 10, and is now fairly widely deployed
server-side. There has been experimentation with larger initial windows, in combination with packet
pacing.</t>

</section>
<section anchor="packet-pacing" title="Packet Pacing">

<t>TBD</t>

</section>
<section anchor="explicit-congestion-control" title="Explicit Congestion Control">

<t>Apple <eref target="https://developer.apple.com/videos/wwdc/2015/?id=719">deploying in iOS and OSX</eref>.</t>

</section>
<section anchor="tail-loss-probes" title="Tail Loss Probes">

<t><eref target="http://tools.ietf.org/html/draft-dukkipati-tcpm-tcp-loss-probe-01">draft</eref></t>

</section>
<section anchor="slow-start-after-idle" title="Slow Start after Idle">

<figure><artwork><![CDATA[
net.ipv4.tcp_slow_start_after_idle = 0
]]></artwork></figure>

</section>
<section anchor="nagles-algorithm" title="Nagle’s Algorithm">

<t>Most implementations disable</t>

</section>
<section anchor="half-close" title="Half-close">

<t>Client or server is free to half-close after a request or response has been completed; or when there is no pending stream in HTTP/2.</t>

</section>
<section anchor="abort" title="Abort">

<t>No client abort for HTTP/1.1 after the request body has been sent. Delayed full close is expected following an error response to avoid RST on the client.</t>

</section>
<section anchor="keep-alive" title="Keep-alive">

<t>TCP keep-alive likely disabled. App-level keep-alive is required for long-lived requests to detect failed peers.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>This document does not require action from IANA.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference anchor='RFC2119'>

<front>
<title abbrev='RFC Key Words'>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='Scott Bradner'>
<organization>Harvard University</organization>
<address>
<postal>
<street>1350 Mass. Ave.</street>
<street>Cambridge</street>
<street>MA 02138</street></postal>
<phone>- +1 617 495 3864</phone>
<email>sob@harvard.edu</email></address></author>
<date year='1997' month='March' />
<area>General</area>
<keyword>keyword</keyword>
<abstract>
<t>
   In many standards track documents several words are used to signify
   the requirements in the specification.  These words are often
   capitalized.  This document defines these words as they should be
   interpreted in IETF documents.  Authors who follow these guidelines
   should incorporate this phrase near the beginning of their document:

<list>
<t>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
      "OPTIONAL" in this document are to be interpreted as described in
      RFC 2119.
</t></list></t>
<t>
   Note that the force of these words is modified by the requirement
   level of the document in which they are used.
</t></abstract></front>

<seriesInfo name='BCP' value='14' />
<seriesInfo name='RFC' value='2119' />
<format type='TXT' octets='4723' target='http://www.rfc-editor.org/rfc/rfc2119.txt' />
<format type='HTML' octets='17491' target='http://xml.resource.org/public/rfc/html/rfc2119.html' />
<format type='XML' octets='5777' target='http://xml.resource.org/public/rfc/xml/rfc2119.xml' />
</reference>



<reference  anchor='RFC7230' target='http://www.rfc-editor.org/info/rfc7230'>
<front>
<title>Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</title>
<author initials='R.' surname='Fielding' fullname='R. Fielding' role='editor'><organization /></author>
<author initials='J.' surname='Reschke' fullname='J. Reschke' role='editor'><organization /></author>
<date year='2014' month='June' />
<abstract><t>The Hypertext Transfer Protocol (HTTP) is a stateless application-level protocol for distributed, collaborative, hypertext information systems.  This document provides an overview of HTTP architecture and its associated terminology, defines the &quot;http&quot; and &quot;https&quot; Uniform Resource Identifier (URI) schemes, defines the HTTP/1.1 message syntax and parsing requirements, and describes related security concerns for implementations.</t></abstract>
</front>
<seriesInfo name='RFC' value='7230'/>
<seriesInfo name='DOI' value='10.17487/RFC7230'/>
</reference>



<reference  anchor='RFC0793' target='http://www.rfc-editor.org/info/rfc793'>
<front>
<title>Transmission Control Protocol</title>
<author initials='J.' surname='Postel' fullname='J. Postel'><organization /></author>
<date year='1981' month='September' />
</front>
<seriesInfo name='STD' value='7'/>
<seriesInfo name='RFC' value='793'/>
<seriesInfo name='DOI' value='10.17487/RFC0793'/>
</reference>




    </references>

    <references title='Informative References'>





<reference  anchor='RFC7430' target='http://www.rfc-editor.org/info/rfc7430'>
<front>
<title>Analysis of Residual Threats and Possible Fixes for Multipath TCP (MPTCP)</title>
<author initials='M.' surname='Bagnulo' fullname='M. Bagnulo'><organization /></author>
<author initials='C.' surname='Paasch' fullname='C. Paasch'><organization /></author>
<author initials='F.' surname='Gont' fullname='F. Gont'><organization /></author>
<author initials='O.' surname='Bonaventure' fullname='O. Bonaventure'><organization /></author>
<author initials='C.' surname='Raiciu' fullname='C. Raiciu'><organization /></author>
<date year='2015' month='July' />
<abstract><t>This document analyzes the residual threats for Multipath TCP (MPTCP) and explores possible solutions to address them.</t></abstract>
</front>
<seriesInfo name='RFC' value='7430'/>
<seriesInfo name='DOI' value='10.17487/RFC7430'/>
</reference>



<reference  anchor='RFC6928' target='http://www.rfc-editor.org/info/rfc6928'>
<front>
<title>Increasing TCP's Initial Window</title>
<author initials='J.' surname='Chu' fullname='J. Chu'><organization /></author>
<author initials='N.' surname='Dukkipati' fullname='N. Dukkipati'><organization /></author>
<author initials='Y.' surname='Cheng' fullname='Y. Cheng'><organization /></author>
<author initials='M.' surname='Mathis' fullname='M. Mathis'><organization /></author>
<date year='2013' month='April' />
<abstract><t>This document proposes an experiment to increase the permitted TCP initial window (IW) from between 2 and 4 segments, as specified in RFC 3390, to 10 segments with a fallback to the existing recommendation when performance issues are detected.  It discusses the motivation behind the increase, the advantages and disadvantages of the higher initial window, and presents results from several large-scale experiments showing that the higher initial window improves the overall performance of many web services without resulting in a congestion collapse.  The document closes with a discussion of usage and deployment for further experimental purposes recommended by the IETF TCP Maintenance and Minor Extensions (TCPM) working group.</t></abstract>
</front>
<seriesInfo name='RFC' value='6928'/>
<seriesInfo name='DOI' value='10.17487/RFC6928'/>
</reference>




    </references>



  </back>
</rfc>

