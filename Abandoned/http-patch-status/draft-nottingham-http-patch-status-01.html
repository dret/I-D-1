<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "about:legacy-compat">
<html lang="en"><head profile="http://dublincore.org/documents/2008/08/04/dc-html/"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The 2NN Patch HTTP Status Code</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><style type="text/css">
      body {
        padding-top: 80px;
        padding-bottom: 80px;
        position: relative;
      }
      .table.header th, .table.header td {
        border-top: none;
        padding: 0;
      }
      #rfc\.meta {
        width: 40%;
        float: right
      }
      #rfc\.toc > ul li {
        list-style: none;
      }
      .container .nav-sublist {
        padding-left: 20px;
        padding-right: 10px;
        font-size: 90%;
      }
      .container .navbar-brand {
        padding-top: 0;
      }
      .container .nav > li > a {
        padding: 10px 7px 5px 15px;
        display: inline-block;
      }
      .container .nav > li > a + a {
        padding: 10px 15px 5px 7px;
        display: inline-block;
      }
      .container .nav > li > a {
        padding: 5px 10px;
      }
      .filename {
        color: rgb(119, 119, 119);
        font-size: 23px;
        font-weight: normal;
        height: auto;
        line-height: 23px;
      }
      dl {
        margin-left: 1em;
      }
      dl.dl-horizontal: {
        margin-left: 0;
      }
      dl > dt {
        float: left;
        margin-right: 1em;
      }
      dl.nohang > dt {
        float: none;
      }
      dl > dd {
        margin-bottom: .5em;
      }
      dl.compact > dd {
        margin-bottom: 0em;
      }
      dl > dd > dl {
        margin-top: 0.5em;
        margin-bottom: 0em;
      }
      ul.empty {
        list-style-type: none;
      }
      ul.empty li {
        margin-top: .5em;
      }
      td.reference {
        padding-right: 1em;
        vertical-align: top;
      }
      .feedback {
        position: fixed;
        bottom: 5px;
        right: 5px;
      }
      .fbbutton {
        margin-left: 5px;
      }
      h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
        color: rgb(51, 51, 51);
      }
    </style><link rel="Author" href="#rfc.authors"><link rel="Copyright" href="#rfc.copyrightnotice"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 The 2NN Patch Status Code" href="#rfc.section.2"><link rel="Chapter" title="3 IANA Considerations" href="#rfc.section.3"><link rel="Chapter" title="4 Security Considerations" href="#rfc.section.4"><link rel="Chapter" title="5 Acknowledgements" href="#rfc.section.5"><link rel="Chapter" href="#rfc.section.6" title="6 References"><link rel="Appendix" title="A 2NN Patch and HTTP/2 Server Push" href="#rfc.section.A"><meta name="generator" content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/"><meta name="keywords" content="Internet-Draft"><link rel="schema.dct" href="http://purl.org/dc/terms/"><meta name="dct.creator" content="Nottingham, M."><meta name="dct.identifier" content="urn:ietf:id:draft-nottingham-http-patch-status-01"><meta name="dct.issued" scheme="ISO8601" content="2015-11-14"><meta name="dct.abstract" content="This document specifies the 2NN Patch HTTP status code to allow servers to perform partial updates of stored responses, e.g. in client caches."><meta name="description" content="This document specifies the 2NN Patch HTTP status code to allow servers to perform partial updates of stored responses, e.g. in client caches."></head><body><div class="container" id="top"><div class="row"><div class="col-md-4 col-md-push-8 hidden-sm hidden-xs" role="navigation"><div class="navbar"><div class="navbar-brand"><a href="#top">Internet-Draft</a></div><br clear="all"><div class=""><div id="rfc.toc"><ul class="nav"><li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">Introduction</a><ul><li><a href="#rfc.section.1.1">1.1</a>&nbsp;&nbsp;&nbsp;<a href="#notational-conventions">Notational Conventions</a></li></ul></li><li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#status">The 2NN Patch Status Code</a><ul><li><a href="#rfc.section.2.1">2.1</a>&nbsp;&nbsp;&nbsp;<a href="#the-patches-header-field">The Patches Header Field</a></li></ul></li><li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA Considerations</a><ul><li><a href="#rfc.section.3.1">3.1</a>&nbsp;&nbsp;&nbsp;<a href="#nn-patch-http-status-code">2NN Patch HTTP Status Code</a></li><li><a href="#rfc.section.3.2">3.2</a>&nbsp;&nbsp;&nbsp;<a href="#accept-patch-header-field">Accept-Patch Header Field</a></li><li><a href="#rfc.section.3.3">3.3</a>&nbsp;&nbsp;&nbsp;<a href="#patches-header-field">Patches Header Field</a></li></ul></li><li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#security-considerations">Security Considerations</a></li><li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#acknowledgements">Acknowledgements</a></li><li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul><li><a href="#rfc.section.6.1">6.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.1">Normative References</a></li><li><a href="#rfc.section.6.2">6.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Informative References</a></li></ul></li><li><a href="#rfc.section.A">A.</a>&nbsp;&nbsp;&nbsp;<a href="#nn-patch-and-http2-server-push">2NN Patch and HTTP/2 Server Push</a></li><li><a href="#rfc.authors">Author's Address</a></li></ul></div></div></div></div><div class="col-md-8 col-md-pull-4 main" role="main"><table class="table table-condensed header" id="rfc.headerblock"><tbody><tr><td class="text-left">Network Working Group</td><td class="text-right">M. Nottingham</td></tr><tr><td class="text-left">Internet-Draft</td><td class="text-right">November 14, 2015</td></tr><tr><td class="text-left">Updates: <a href="https://tools.ietf.org/html/rfc5789">5789</a> (if approved)</td><td class="text-right"></td></tr><tr><td class="text-left">Intended status: Informational</td><td class="text-right"></td></tr><tr><td class="text-left">Expires: May 17, 2016</td><td class="text-right"></td></tr></tbody></table><div id="rfc.title"><h1>The 2NN Patch HTTP Status Code</h1><div class="filename">draft-nottingham-http-patch-status-01</div></div><hr><h2 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h2><div class="lead"><p>This document specifies the 2NN Patch HTTP status code to allow servers to perform partial updates of stored responses, e.g. in client caches.</p></div><div id="rfc.status"><h2><a href="#rfc.status">Status of this Memo</a></h2><p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p><p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute working documents as Internet-Drafts. The list of current Internet-Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.</p><p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as “work in progress”.</p><p>This Internet-Draft will expire on May 17, 2016.</p></div><div id="rfc.copyrightnotice"><h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2><p>Copyright © 2015 IETF Trust and the persons identified as the document authors. All rights reserved.</p><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p></div><div id="introduction"><h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a href="#introduction">Introduction</a></h2><div id="rfc.section.1.p.1"><p><a href="#RFC5246"><cite title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a> defines the HTTP PATCH method as a means of selectively updating the state of a resource on a server. This document complements that specification by specifying a means for a server to selectively update a stored response on a client – usually, but not always, in a cache <a href="#I-D.ietf-httpbis-p6-cache"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[I-D.ietf-httpbis-p6-cache]</cite></a>.</p></div><div id="notational-conventions"><h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1</a>&nbsp;<a href="#notational-conventions">Notational Conventions</a></h3><div id="rfc.section.1.1.p.1"><p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <a href="#RFC2119"><cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>.</p></div><div id="rfc.section.1.1.p.2"><p>This document uses the Augmented BNF defined by <a href="#RFC5246"><cite title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a>, and additionally uses the entity-tag rule defined in <a href="#I-D.ietf-httpbis-p4-conditional"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests">[I-D.ietf-httpbis-p4-conditional]</cite></a>.</p></div></div></div><div id="status"><h2 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#status">The 2NN Patch Status Code</a></h2><div id="rfc.section.2.p.1"><p>The 2NN (Patch) status code allows a response to patch a stored response, by reusing the patch formats of <a href="#RFC5789"><cite title="PATCH Method for HTTP">[RFC5789]</cite></a>. In some sense, it is the complement of the HTTP PATCH request method.</p></div><div id="rfc.section.2.p.2"><p>TODO: is this a 2NN or 3xx?</p></div><div id="rfc.section.2.p.3" class="avoidbreakafter"><p>Clients can advertise support for 2NN (Patch), along with the patch formats supported in it, by using the Accept-Patch header field in requests. For example:</p></div><div id="rfc.figure.u.1"><pre>
    GET /foo HTTP/1.1
    Host: api.example.com
    Accept-Patch: application/patch+json
    If-None-Match: "abcdef", "ghijkl"
    User-Agent: Example/1.0
</pre></div><div id="rfc.section.2.p.4" class="avoidbreakafter"><p>If the server can generate a patch for one of the entity tags provided in If-None-Match, in one of the accepted patch formats, it can generate a 2NN (Patch) response:</p></div><div id="rfc.figure.u.2"><pre>
    HTTP/1.1 2NN Patch
    Content-Type: application/patch+json
    Patches: "ghijkl"
    ETag: "mnopqrs"
</pre></div><div id="rfc.section.2.p.5"><p>When determining whether a patch can be generated, the server MUST use the strong comparison function; see Section 2.3.2 of <a href="#I-D.ietf-httpbis-p4-conditional"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests">[I-D.ietf-httpbis-p4-conditional]</cite></a>.</p></div><div id="rfc.section.2.p.6"><p>The entity tag carried by the ETag header field is associated with the selected representation - i.e., the stored response after the patch is applied.</p></div><div id="rfc.section.2.p.7"><p>The Patches header field identifies the representation to apply the patch to, as indicated by the entity-tag provided in If-None-Match request header field.</p></div><div id="rfc.section.2.p.8"><p>Therefore, in the example above, the stored response “ghijkl” is being patched, with the resulting stored response having the entity tag “mnopqrs”.</p></div><div id="rfc.section.2.p.9"><p>Application of a 2NN (Patch) response happens in a manner very similar to the process for freshening a stored response by applying a 304 (Not Modified), as described in <a href="#I-D.ietf-httpbis-p6-cache"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[I-D.ietf-httpbis-p6-cache]</cite></a>, Section 4.3.4.</p></div><div id="rfc.section.2.p.10"><p>In particular, the stored response to apply a 2NN (Patch) response to is the same; if none is selected, the patch fails, and the client MAY resubmit the request without an Accept-Patch header field, in order to get a full response.</p></div><div id="rfc.section.2.p.11" class="avoidbreakafter"><p>If a stored response is selected, clients MUST update it in the following manner:</p></div><div id="rfc.section.2.p.12"><ul><li>The value of the Content-Length header field MUST be adjusted to reflect the length of the patched response body.</li><li>The ETag header field MUST be replaced (or inserted, if not present) with the value of the Patches header field in the 2NN response (if present).</li><li>Other header fields in the 2NN response MUST update the stored response, in the same manner as described in <a href="#I-D.ietf-httpbis-p6-cache"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[I-D.ietf-httpbis-p6-cache]</cite></a>, Section 4.3.4. However, the following fields MUST be omitted: Content-Type, Patches.</li></ul></div><div id="rfc.section.2.p.13"><p>The 2NN (Patch) status code SHOULD NOT be generated if the request did not include If-None-Match, unless conflicts are handled by the patch format itself (e.g., allowing a patch to append to an array), or externally.</p></div><div id="rfc.section.2.p.14"><p>Intermediaries MAY append the Accept-Patch header field to requests, or append new values to it, if they will process 2NN responses for the patch format(s) they add. Likewise, intermediaries MAY generate 2NN (Patch) responses under the conditions specified here.</p></div><div id="rfc.section.2.p.15"><p>The 2NN status code is not cacheable by default, and is not a representation of any identified resource.</p></div><div id="the-patches-header-field"><h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1</a>&nbsp;<a href="#the-patches-header-field">The Patches Header Field</a></h3><div id="rfc.section.2.1.p.1"><p>The Patches header field identifies the stored representation that a patch is to be applied to in a 2NN (Patch) response.</p></div><div id="rfc.figure.u.3"><pre>
    Patches = entity-tag
</pre></div></div></div><div id="iana-considerations"><h2 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#iana-considerations">IANA Considerations</a></h2><div id="nn-patch-http-status-code"><h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1</a>&nbsp;<a href="#nn-patch-http-status-code">2NN Patch HTTP Status Code</a></h3><div id="rfc.section.3.1.p.1"><p>This document defines the 2NN (Patch) HTTP status code, as per <a href="#I-D.ietf-httpbis-p2-semantics"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content">[I-D.ietf-httpbis-p2-semantics]</cite></a>.</p></div><div id="rfc.section.3.1.p.2" class="avoidbreakafter"><ul><li>Status Code (3 digits): TBD</li><li>Short Description: Patch</li><li>Pointer to specification text: <a href="#status" title="The 2NN Patch Status Code">Section&nbsp;2</a></li></ul></div></div><div id="accept-patch-header-field"><h3 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2</a>&nbsp;<a href="#accept-patch-header-field">Accept-Patch Header Field</a></h3><div id="rfc.section.3.2.p.1"><p>This document updates <a href="#RFC5789"><cite title="PATCH Method for HTTP">[RFC5789]</cite></a> to allow the Accept-Patch HTTP header field to be used in requests; please update the registry to reflect this.</p></div></div><div id="patches-header-field"><h3 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3</a>&nbsp;<a href="#patches-header-field">Patches Header Field</a></h3><div id="rfc.section.3.3.p.1"><p>This document defines a new HTTP header, field, “Patches”, to be registered in the Permanent Message Header Registry, as per <a href="#RFC3864"><cite title="Registration Procedures for Message Header Fields">[RFC3864]</cite></a>.</p></div><div id="rfc.section.3.3.p.2" class="avoidbreakafter"><ul><li>Header field name: Patches</li><li>Applicable protocol: http</li><li>Status: standard</li><li>Author/Change controller: IETF</li><li>Specification document(s): [this document]</li><li>Related information:</li></ul></div></div></div><div id="security-considerations"><h2 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#security-considerations">Security Considerations</a></h2><div id="rfc.section.4.p.1"><p>2NN (Patch) can be brittle when the application of a patch fails, because the client has no way to report the failure of a patch to the server. This assymetry might be exploited by an attacker, but can be mitigated by judicious use of strong ETags.</p></div><div id="rfc.section.4.p.2"><p>Some patch formats might have additional security considerations.</p></div></div><div id="acknowledgements"><h2 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#acknowledgements">Acknowledgements</a></h2><div id="rfc.section.5.p.1"><p>Thanks to Martin Duerst for his input.</p></div></div><h2 id="rfc.references"><a id="rfc.section.6" href="#rfc.section.6">6.</a> References</h2><h3 id="rfc.references.1"><a href="#rfc.section.6.1" id="rfc.section.6.1">6.1</a> Normative References</h3><dl class="reference"><dt id="I-D.ietf-httpbis-p4-conditional">[I-D.ietf-httpbis-p4-conditional]</dt><dd>Fielding, R. and J. Reschke, “<a href="https://tools.ietf.org/html/draft-ietf-httpbis-p4-conditional-26">Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests</a>”, Internet-Draft&nbsp;draft-ietf-httpbis-p4-conditional-26 (work in progress), February&nbsp;2014.</dd><dt id="I-D.ietf-httpbis-p6-cache">[I-D.ietf-httpbis-p6-cache]</dt><dd>Fielding, R., Nottingham, M., and J. Reschke, “<a href="https://tools.ietf.org/html/draft-ietf-httpbis-p6-cache-26">Hypertext Transfer Protocol (HTTP/1.1): Caching</a>”, Internet-Draft&nbsp;draft-ietf-httpbis-p6-cache-26 (work in progress), February&nbsp;2014.</dd><dt id="RFC2119">[RFC2119]</dt><dd>Bradner, S., “<a href="http://www.rfc-editor.org/info/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>”, BCP&nbsp;14, RFC&nbsp;2119, <a href="http://dx.doi.org/10.17487/RFC2119">DOI&nbsp;10.17487/RFC2119</a>, March&nbsp;1997, &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.</dd><dt id="RFC5246">[RFC5246]</dt><dd>Dierks, T. and E. Rescorla, “<a href="http://www.rfc-editor.org/info/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>”, RFC&nbsp;5246, <a href="http://dx.doi.org/10.17487/RFC5246">DOI&nbsp;10.17487/RFC5246</a>, August&nbsp;2008, &lt;<a href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.</dd><dt id="RFC5789">[RFC5789]</dt><dd>Dusseault, L. and J. Snell, “<a href="http://www.rfc-editor.org/info/rfc5789">PATCH Method for HTTP</a>”, RFC&nbsp;5789, <a href="http://dx.doi.org/10.17487/RFC5789">DOI&nbsp;10.17487/RFC5789</a>, March&nbsp;2010, &lt;<a href="http://www.rfc-editor.org/info/rfc5789">http://www.rfc-editor.org/info/rfc5789</a>&gt;.</dd></dl><h3 id="rfc.references.2"><a href="#rfc.section.6.2" id="rfc.section.6.2">6.2</a> Informative References</h3><dl class="reference"><dt id="I-D.ietf-httpbis-http2">[I-D.ietf-httpbis-http2]</dt><dd>Belshe, M., Peon, R., and M. Thomson, “<a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-17">Hypertext Transfer Protocol version 2</a>”, Internet-Draft&nbsp;draft-ietf-httpbis-http2-17 (work in progress), February&nbsp;2015.</dd><dt id="I-D.ietf-httpbis-p2-semantics">[I-D.ietf-httpbis-p2-semantics]</dt><dd>Fielding, R. and J. Reschke, “<a href="https://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-26">Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>”, Internet-Draft&nbsp;draft-ietf-httpbis-p2-semantics-26 (work in progress), February&nbsp;2014.</dd><dt id="RFC3864">[RFC3864]</dt><dd>Klyne, G., Nottingham, M., and J. Mogul, “<a href="http://www.rfc-editor.org/info/rfc3864">Registration Procedures for Message Header Fields</a>”, BCP&nbsp;90, RFC&nbsp;3864, <a href="http://dx.doi.org/10.17487/RFC3864">DOI&nbsp;10.17487/RFC3864</a>, September&nbsp;2004, &lt;<a href="http://www.rfc-editor.org/info/rfc3864">http://www.rfc-editor.org/info/rfc3864</a>&gt;.</dd></dl><div id="nn-patch-and-http2-server-push"><h2 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a>&nbsp;<a href="#nn-patch-and-http2-server-push">2NN Patch and HTTP/2 Server Push</a></h2><div id="rfc.section.A.p.1"><p>In HTTP/2 <a href="#I-D.ietf-httpbis-http2"><cite title="Hypertext Transfer Protocol version 2">[I-D.ietf-httpbis-http2]</cite></a>, it is possible to “push” a request/response pair into a client’s cache. 2NN (Patch) can be used with this mechanism to perform partial updates on stored responses.</p></div><div id="rfc.section.A.p.2" class="avoidbreakafter"><p>For example, if a cache has this response stored for “http://example.com/list”:</p></div><div id="rfc.figure.u.4"><pre>
    200 OK
    Content-Type: application/json
    Cache-Control: max-age=3600
    ETag: "aaa"

    { "items": ["a"]}
</pre></div><div id="rfc.section.A.p.3" class="avoidbreakafter"><p>A HTTP/2 server could partially update it by sending the request/response pair (using pseudo-HTTP/1 syntax for purposes of illustration):</p></div><div id="rfc.figure.u.5"><pre>
    GET /list
    Host: example.com
    If-None-Match: "aaa"
    Accept-Patch: application/patch+json

    2NN Patch
    Content-Type: application/patch+json
    ETag: "aab"
    Patches: "aaa"

    [
        { "op": "add", "path": "/items/1", "value": "b" }
    ]
</pre></div><div id="rfc.section.A.p.4" class="avoidbreakafter"><p>Once the patch is applied, the stored response is now:</p></div><div id="rfc.figure.u.6"><pre>
    200 OK
    Content-Type: application/json
    Cache-Control: max-age=3600
    ETag: "aab"

    { "items": ["a", "b"]}
</pre></div><div id="rfc.section.A.p.5"><p>Note that this approach requires a server pushing partial responses to know the stored response’s ETag, since the client cache will silently ignore the push if it does not match that provided in “Patches”. Likewise, clients that are not conformant to this specification will silently drop such pushes, since the status code is not recognised (as per <a href="#I-D.ietf-httpbis-p6-cache"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[I-D.ietf-httpbis-p6-cache]</cite></a>).</p></div><div id="rfc.section.A.p.6" class="avoidbreakafter"><p>However, it is possible to do some partial updates without strong consistency. For example, if the stored response is as above, and the server simply wishes to append an value to an array, without regard for the current content of the array (because, presumably, ordering of its content is not important), it can push:</p></div><div id="rfc.figure.u.7"><pre>
    GET /list
    Host: example.com
    Accept-Patch: application/patch+json

    2NN Patch
    Content-Type: application/patch+json

    [
        { "op": "add", "path": "/items/-", "value": "b" }
    ]
</pre></div><div id="rfc.section.A.p.7"><p>Here, the resulting document would be as above, but since entity tags are not provided, the operation will succeed as long as the patch application succeeds.</p></div></div><div class="avoidbreakinside"><h2 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h2><p><b>Mark Nottingham</b><br>EMail: <a href="mailto:mnot@mnot.net">mnot@mnot.net</a><br>URI: <a href="http://www.mnot.net/">http://www.mnot.net/</a></p></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script></body></html>